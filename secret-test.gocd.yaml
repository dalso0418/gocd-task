# secret-test.gocd.yaml

pipelines:
  show-my-secret-pipeline:
    group: defaultGroup
    timer:
      # GoCD가 사용하는 6자리 Cron 형식(초 분 시 일 월 요일)으로 수정합니다.
      spec: "0 0 0 1 1 ?"
    materials:
      my-git-repo2: # 머티리얼에 'my-git-repo'라는 이름을 부여합니다.
        git: https://github.com/dalso0418/gocd-task # 감시할 Git 저장소 주소입니다.
        branch: main # main 브랜치를 감시합니다.
    stages:
      - display-secret-stage:
          jobs:
            display-secret-job:
              environment_variables:
                MY_SECRET: "{{SECRET:[dal-so-secrets][my_api_key]}}"
              tasks:
                - exec:
                    command: bash
                    arguments:
                      - -c
                      - 'echo "API 키 값은 ===> $MY_SECRET"'
